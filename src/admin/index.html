<html>
  <head>
    <style>
      html {
        -webkit-text-size-adjust: 100%;
        text-size-adjust: 100%;
        -webkit-tap-highlight-color: transparent;
        -webkit-font-smoothing: antialiased;
      }
      html,
      body,
      #app {
        height: 100%;
        margin: 0;
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <div id="app"></div> 
    <script type="module">
      import { defineConfig, renderStudio } from "https://esm.sh/sanity?alias=lodash:lodash-es";
      import { deskTool } from "https://esm.sh/sanity/desk?alias=lodash:lodash-es";
      import {schemaTypes} from './schemas';

      const config = defineConfig({
        name: 'default',
        title: 'ruhrpott-studio',
        projectId: '349a1vg2',
        dataset: 'production',
        plugins: [
          deskTool(),
          codeInput()
        ],
        schema: {
          types: schemaTypes,
        },
        document: {
          newDocumentOptions: (prev, context) =>
            prev.filter(document => !singleEdits.includes(document.templateId)),
          actions: (prev, { schemaType }) => {
            if (singleEdits.includes(schemaType)) {
              return prev.filter(prevAction => prevAction.action == 'publish');
            }
            return prev;
          },
        },
      });
      renderStudio(document.getElementById("app"), config);
    </script>
  </body>
</html>