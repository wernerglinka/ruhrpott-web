{% macro responsiveImage(image, metadata) %}
  <figure class="responsive-wrapper js-progressive-image-wrapper" style="padding-bottom:{{ image.aspectRatio}}%;" >
    {% set siteMeta = metadata.site %}
    {# assemble the image url #}
    {% set source = siteMeta.imagePrefix ~ image.src %}

    {# get image source for LRIP #}
    {% set lowResImagesrc = siteMeta.imagePrefix ~ "w_100,c_fill,g_auto,f_auto/" ~ image.src %}

    <img class="low-res" src="{{ lowResImagesrc }}" alt="{{ image.alt }}"/>
    <img class="high-res" src="" alt="{{ image.alt }}" data-prefix="{{ siteMeta.imagePrefix }}" data-source="{{ image.src }}"/>
    {% if image.caption %}<figcaption>{{ image.caption | mdToHTML | safe }}</figcaption>{% endif %}
  </figure>
{% endmacro %}